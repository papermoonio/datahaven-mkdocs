{% extends "base.html" %}

{% block styles %}
	{{ super() }}
  <link rel="stylesheet" href="{{ 'assets/stylesheets/datahaven.css' | url }}">
{% endblock %}

{% block site_meta %}
  {{ super() }}
  {% if page and page.meta and page.meta.keywords %}
    <meta name="keywords" content="{{ page.meta.keywords }}">
  {% endif %}
{% endblock %}

{% block htmltitle %} 
  {% if page.is_homepage %} 
    <title>Documentation for DataHaven</title> 
  {% elif page and page.meta and page.meta.title %} 
    <title>{{ page.meta.title }} | {{ config.site_name }}</title> 
  {% elif page and page.title and not page.is_homepage %} 
    <title>{{ page.title }} | {{ config.site_name }}</title> 
  {% else -%}
    <title>{{ config.site_name }}</title> 
  {% endif %} 
{% endblock %} 

{% block container %} 
  <div class="md-content" data-md-component="content">
    {% set class = "index-page" if not page.content and not page.is_homepage %}
    <article class="md-content__inner md-typeset {{ class }}">
      {% block content %}
        {% include "partials/content.html" %}
      {% endblock %}
    </article>
  </div>
{% endblock %} 

{% block scripts %}
  {{ super() }}

  <script>
    const content = document.querySelector(".md-content");
    const header = document.querySelector(".md-header");
    const footer = document.querySelector(".md-footer");

    function updateContentHeight() {
      if (content && header && footer) {
        const contentHeight = content.offsetHeight;
        const headerHeight = header.offsetHeight;
        const footerHeight = footer.offsetHeight;

        const pageHeight = headerHeight + footerHeight + contentHeight;
        const viewportHeight = window.innerHeight;

        if (pageHeight < viewportHeight) {
          content.style.minHeight = `${viewportHeight - headerHeight - footerHeight}px`;
        } else {
          content.style.minHeight = 'auto';
        }
      }
    }

    updateContentHeight();
    window.addEventListener("resize", updateContentHeight);
  </script>
{% endblock %}